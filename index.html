<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jacked Classic Tracker</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Custom scrollbar for a cleaner look on mobile */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        body {
            background-color: #020617; /* slate-950 */
            overscroll-behavior-y: none; /* Prevent pull-to-refresh on mobile */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS (Inline SVGs to replace lucide-react imports) ---
        
        const ChevronRight = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m9 18 6-6-6-6"/></svg>
        );
        const TimerIcon = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></svg>
        );
        const Trophy = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
        );
        const Flame = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-2.246-5.318-1-7 1.879 2.375 5.5 5.875 5.5 10 0 1.57-.93 3.07-2.5 3.5a2.485 2.485 0 0 1-1.488-.135C8.846 14.925 8.5 14.5 8.5 14.5Z"/><path d="M17.5 15c0 3.037-2 5.5-4.5 5.5-2.5 0-5.5-2-5.5-6 0-3.5 3-5 5.5-8 2.5 3 4.5 4.963 4.5 8.5Z"/></svg>
        );
        const CheckCircle2 = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
        );
        const RefreshCw = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );
        const LogOut = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
        );
        const Minus = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/></svg>
        );
        const Plus = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/><path d="M12 5v14"/></svg>
        );

        // --- DATA STRUCTURE ---

        const WORKOUT_DATA = {
            PULL: [
                { id: 'A', base: 'DB Chest Supported Rows', variations: { JackedUp: '1.5 Reps', Jacked: 'Standard', JackedDown: 'Standard Rows', HLL: 'Incline Crush Grip' } },
                { id: 'B', base: 'DB Urlachers', variations: { JackedUp: '3 sec ISO Hold', Jacked: 'Standard', JackedDown: 'Seated High Pulls', HLL: 'High Pulls' } },
                { id: 'C', base: 'DB Haney Shrugs', variations: { JackedUp: '10 sec ISO Hold', Jacked: 'Standard', JackedDown: 'Lower Partials w/ 5 sec ISO', HLL: 'Standard Shrugs' } },
                { id: 'D', base: 'DB No Money Curls', variations: { JackedUp: 'Zottman Curls', Jacked: 'Standard', JackedDown: 'Alt. No Money Curls', HLL: 'Shovel Curls' } }
            ],
            PUSH: [
                { id: 'A', base: 'DB Bench Press', variations: { JackedUp: 'Paused (5 Sec)', Jacked: 'Standard', JackedDown: 'Upper Partials', HLL: 'Crush Grip' } },
                { id: 'B', base: 'DB Side Lateral Raises', variations: { JackedUp: '1.5 Reps', Jacked: 'Standard', JackedDown: 'Cheat Laterals', HLL: 'Abduction Rows' } },
                { id: 'C', base: 'Lying DB Tricep Ext', variations: { JackedUp: 'Stretch Ext', Jacked: 'Standard', JackedDown: 'JM Press', HLL: 'Floor Ext' } },
                { id: 'D', base: 'DB OHP', variations: { JackedUp: 'Z Press', Jacked: 'Standard', JackedDown: 'Push Press', HLL: 'Over and Backs' } }
            ],
            LEGS: [
                { id: 'A', base: 'Alt. Reverse Lunges', variations: { JackedUp: '1.5 Reps', Jacked: 'Standard', JackedDown: 'Partials (Knees)', HLL: 'Goblet Lunges' } },
                { id: 'B', base: 'DB Hip Thrusts', variations: { JackedUp: 'Marches', Jacked: 'Standard', JackedDown: 'Partials (Knees)', HLL: 'Single Leg' } },
                { id: 'C', base: 'DB Rocket Squats', variations: { JackedUp: 'Deep (Floor)', Jacked: 'Standard (Shins)', JackedDown: 'Partials (Knees)', HLL: 'Standard Squats' } },
                { id: 'D', base: 'DB RDLs', variations: { JackedUp: '1.5 Reps', Jacked: 'Standard', JackedDown: 'Upper Partials', HLL: 'Single Leg' } }
            ]
        };

        // --- HELPER LOGIC ---

        const getPathDetails = (reps) => {
            const r = parseInt(reps);
            if (isNaN(r)) return { path: 'Jacked', threshold: 6 };

            if (r >= 13) return { path: 'JackedUp', threshold: Math.ceil(r / 2) };
            if (r >= 10) return { path: 'Jacked', threshold: 6 };
            if (r >= 6) return { path: 'JackedDown', threshold: 6 };
            return { path: 'HLL', threshold: 6 };
        };

        const getRank = (score) => {
            if (score > 55) return { title: 'XTREME', color: 'text-purple-500', border: 'border-purple-500' };
            if (score >= 46) return { title: 'ELITE', color: 'text-red-500', border: 'border-red-500' };
            if (score >= 36) return { title: 'PRO', color: 'text-orange-500', border: 'border-orange-500' };
            if (score >= 20) return { title: 'SOLID', color: 'text-yellow-500', border: 'border-yellow-500' };
            return { title: 'BASIX', color: 'text-slate-400', border: 'border-slate-400' };
        };

        // --- MAIN COMPONENT ---

        function JackedClassicApp() {
            const [phase, setPhase] = useState('MENU');
            const [selectedDay, setSelectedDay] = useState(null);
            const [ignitorData, setIgnitorData] = useState({});
            const [activeExercises, setActiveExercises] = useState([]);
            const [currentExIndex, setCurrentExIndex] = useState(0);
            const [currentRepsInput, setCurrentRepsInput] = useState('');
            const [score, setScore] = useState(0);
            const [round, setRound] = useState(1);
            const [eliminatedList, setEliminatedList] = useState([]);
            const [lastReps, setLastReps] = useState({});
            const [giveUpConfirm, setGiveUpConfirm] = useState(false);
            const [timeLeft, setTimeLeft] = useState(60);
            const [timerActive, setTimerActive] = useState(false);
            const audioRef = useRef(null);

            useEffect(() => {
                if (selectedDay) {
                    const initialData = {};
                    WORKOUT_DATA[selectedDay].forEach(ex => {
                        initialData[ex.id] = { weight: '', reps: '', path: 'Jacked', threshold: 6 };
                    });
                    setIgnitorData(initialData);
                }
            }, [selectedDay]);

            useEffect(() => {
                setGiveUpConfirm(false);
            }, [phase, currentExIndex]);

            useEffect(() => {
                let interval = null;
                if (timerActive && timeLeft > 0) {
                    interval = setInterval(() => {
                        setTimeLeft((prev) => prev - 1);
                    }, 1000);
                } else if (timeLeft === 0 && timerActive) {
                    setTimerActive(false);
                    if (audioRef.current) {
                        audioRef.current.currentTime = 0;
                        audioRef.current.play().catch(e => console.log("Audio play failed", e));
                    }
                    startNextRound();
                }
                return () => clearInterval(interval);
            }, [timerActive, timeLeft]);

            const handleStartIgnitor = (day) => {
                setSelectedDay(day);
                setPhase('IGNITOR');
            };

            const handleIgnitorChange = (id, field, value) => {
                const newData = { ...ignitorData };
                if (!newData[id]) {
                    newData[id] = { weight: '', reps: '', path: 'Jacked', threshold: 6 };
                }
                newData[id][field] = value;
                if (field === 'reps') {
                    const { path, threshold } = getPathDetails(value);
                    newData[id].path = path;
                    newData[id].threshold = threshold;
                }
                setIgnitorData(newData);
            };

            const adjustIgnitorValue = (id, field, amount) => {
                const currentVal = ignitorData[id]?.[field];
                const val = currentVal === '' ? 0 : parseInt(currentVal);
                const newVal = Math.max(0, val + amount);
                handleIgnitorChange(id, field, newVal.toString());
            };

            const startChallenge = () => {
                const isValid = Object.values(ignitorData).every(d => d.weight && d.reps);
                if (!isValid) {
                    alert("Please fill in Weight and Reps for all exercises.");
                    return;
                }
                setActiveExercises(['A', 'B', 'C', 'D']);
                setEliminatedList([]);
                setLastReps({});
                setCurrentExIndex(0);
                setScore(0);
                setRound(1);
                setPhase('WORKOUT');
            };

            const handleGiveUp = () => {
                const remainingCasualties = activeExercises.map(id => ({
                    id,
                    round,
                    name: WORKOUT_DATA[selectedDay].find(ex => ex.id === id).base 
                }));
                setEliminatedList(prev => [...prev, ...remainingCasualties]);
                setPhase('RESULTS');
            };

            const requestGiveUp = () => {
                if (giveUpConfirm) {
                    handleGiveUp();
                } else {
                    setGiveUpConfirm(true);
                    setTimeout(() => setGiveUpConfirm(false), 3000);
                }
            };

            const adjustReps = (amount) => {
                const currentVal = currentRepsInput === '' ? 0 : parseInt(currentRepsInput);
                const newVal = Math.max(0, currentVal + amount);
                setCurrentRepsInput(newVal.toString());
            };

            const submitReps = (e) => {
                e.preventDefault();
                if (currentRepsInput === '') return;
                const currentId = activeExercises[currentExIndex];
                const exerciseData = ignitorData[currentId];
                const repsPerformed = parseInt(currentRepsInput);
                const threshold = exerciseData.threshold;
                setLastReps(prev => ({ ...prev, [currentId]: currentRepsInput }));

                let nextActive = [...activeExercises];
                let justEliminated = false;

                if (repsPerformed < threshold) {
                    nextActive = nextActive.filter(id => id !== currentId);
                    setEliminatedList(prev => [...prev, { 
                        id: currentId, 
                        round: round, 
                        name: WORKOUT_DATA[selectedDay].find(ex => ex.id === currentId).base 
                    }]);
                    justEliminated = true;
                } else {
                    setScore(prev => prev + 1);
                }

                setActiveExercises(nextActive);
                if (nextActive.length === 0) {
                    setPhase('RESULTS');
                    return;
                }
                let nextIndex = currentExIndex;
                if (!justEliminated) {
                    nextIndex++;
                }
                if (nextIndex >= nextActive.length) {
                    setPhase('REST');
                    const isLastManStanding = nextActive.length === 1;
                    setTimeLeft(isLastManStanding ? 10 : 60);
                    setTimerActive(true);
                    setCurrentRepsInput(''); 
                } else {
                    setCurrentExIndex(nextIndex);
                    const nextId = nextActive[nextIndex];
                    setCurrentRepsInput(lastReps[nextId] || '');
                }
            };

            const startNextRound = () => {
                setRound(r => r + 1);
                setCurrentExIndex(0);
                setPhase('WORKOUT');
                if (activeExercises.length > 0) {
                    const firstId = activeExercises[0];
                    setCurrentRepsInput(lastReps[firstId] || '');
                }
            };

            const resetApp = () => {
                setPhase('MENU');
                setSelectedDay(null);
                setIgnitorData({});
                setLastReps({});
            };

            // --- VIEWS ---

            if (phase === 'MENU') {
                return (
                    <div className="min-h-screen bg-slate-950 text-slate-100 font-sans p-6 flex flex-col justify-center items-center">
                        <div className="mb-8 text-center">
                            <h1 className="text-4xl font-black italic tracking-tighter text-orange-500 mb-2">JACKED</h1>
                            <h2 className="text-2xl font-bold tracking-widest text-slate-400">CLASSIC</h2>
                        </div>
                        <div className="grid gap-4 w-full max-w-sm">
                            {['PULL', 'PUSH', 'LEGS'].map(day => (
                                <button key={day} onClick={() => handleStartIgnitor(day)} className="bg-slate-800 hover:bg-slate-700 border-2 border-slate-700 hover:border-orange-500 text-xl font-bold py-6 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-between px-6">
                                    <span>{day} DAY</span>
                                    <ChevronRight className="text-orange-500" />
                                </button>
                            ))}
                        </div>
                    </div>
                );
            }

            if (phase === 'IGNITOR') {
                return (
                    <div className="min-h-screen bg-slate-950 text-slate-100 p-4 pb-24">
                        <header className="flex justify-between items-center mb-6 pt-4">
                            <button onClick={() => setPhase('MENU')} className="text-slate-400 hover:text-white">Back</button>
                            <h2 className="text-xl font-bold text-orange-500">{selectedDay} // IGNITOR</h2>
                        </header>
                        <div className="space-y-6">
                            <div className="bg-slate-900/50 p-4 rounded-lg text-sm text-slate-400 border border-slate-800 space-y-2">
                                <p>Set your Base Weight & Max Reps. This determines your Path and X-tinction Threshold.</p>
                                <div className="flex items-center gap-2 text-orange-400 font-semibold">
                                    <TimerIcon className="w-4 h-4" />
                                    <span>Rest 2 minutes between each ignitor set.</span>
                                </div>
                            </div>
                            {WORKOUT_DATA[selectedDay].map((ex) => {
                                const data = ignitorData[ex.id] || { path: 'Jacked', threshold: 6 };
                                const pathColor = data.path === 'JackedUp' ? 'text-purple-400' : data.path === 'Jacked' ? 'text-green-400' : data.path === 'JackedDown' ? 'text-yellow-400' : 'text-red-400';
                                return (
                                    <div key={ex.id} className="bg-slate-800 rounded-xl p-4 shadow-md border border-slate-700">
                                        <div className="flex justify-between items-start mb-3">
                                            <h3 className="font-bold text-lg leading-tight w-2/3">{ex.base}</h3>
                                            <div className="text-right">
                                                <span className={`text-xs font-black uppercase tracking-wider ${pathColor}`}>{data.path}</span>
                                                <div className="text-xs text-slate-500">Threshold: {data.threshold}</div>
                                            </div>
                                        </div>
                                        <div className="space-y-6">
                                            <div>
                                                <label className="text-xs text-slate-400 block mb-2 text-center font-bold uppercase">Weight (lbs)</label>
                                                <div className="flex items-center justify-between gap-2">
                                                    <div className="flex gap-1">
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'weight', -5)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Minus className="w-4 h-4"/></button>
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'weight', -1)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Minus className="w-4 h-4"/></button>
                                                    </div>
                                                    <input type="number" placeholder="0" className="w-full bg-slate-950 border border-slate-600 rounded p-3 text-xl font-mono text-center focus:border-orange-500 outline-none" value={ignitorData[ex.id]?.weight || ''} onChange={(e) => handleIgnitorChange(ex.id, 'weight', e.target.value)} />
                                                    <div className="flex gap-1">
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'weight', 1)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Plus className="w-4 h-4"/></button>
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'weight', 5)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Plus className="w-4 h-4"/></button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <label className="text-xs text-slate-400 block mb-2 text-center font-bold uppercase">Max Reps</label>
                                                <div className="flex items-center justify-between gap-2">
                                                    <div className="flex gap-1">
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'reps', -5)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Minus className="w-4 h-4"/></button>
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'reps', -1)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Minus className="w-4 h-4"/></button>
                                                    </div>
                                                    <input type="number" placeholder="0" className="w-full bg-slate-950 border border-slate-600 rounded p-3 text-xl font-mono text-center focus:border-orange-500 outline-none" value={ignitorData[ex.id]?.reps || ''} onChange={(e) => handleIgnitorChange(ex.id, 'reps', e.target.value)} />
                                                    <div className="flex gap-1">
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'reps', 1)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Plus className="w-4 h-4"/></button>
                                                        <button onClick={() => adjustIgnitorValue(ex.id, 'reps', 5)} className="bg-slate-900 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all"><Plus className="w-4 h-4"/></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                        <div className="fixed bottom-0 left-0 w-full p-4 bg-slate-950 border-t border-slate-800">
                            <button onClick={startChallenge} className="w-full bg-orange-600 hover:bg-orange-500 text-white font-bold py-4 rounded-xl shadow-lg active:scale-95 flex justify-center items-center gap-2">
                                <Flame className="w-5 h-5 fill-current" />
                                START CHALLENGE
                            </button>
                        </div>
                    </div>
                );
            }

            if (phase === 'WORKOUT') {
                const activeId = activeExercises[currentExIndex];
                const exData = WORKOUT_DATA[selectedDay].find(e => e.id === activeId);
                const userExData = ignitorData[activeId];
                const pathColor = userExData.path === 'JackedUp' ? 'text-purple-400 border-purple-500/30 bg-purple-500/10' : userExData.path === 'Jacked' ? 'text-green-400 border-green-500/30 bg-green-500/10' : userExData.path === 'JackedDown' ? 'text-yellow-400 border-yellow-500/30 bg-yellow-500/10' : 'text-red-400 border-red-500/30 bg-red-500/10';

                return (
                    <div className="min-h-screen bg-slate-950 text-slate-100 flex flex-col">
                        <div className="flex justify-between items-center p-4 bg-slate-900 border-b border-slate-800">
                            <div className="text-sm font-mono text-slate-400">ROUND <span className="text-white text-lg font-bold">{round}</span></div>
                            <div className="flex items-center gap-2 text-orange-500 font-mono font-bold text-xl"><Trophy className="w-5 h-5" /> {score}</div>
                        </div>
                        <div className="flex justify-center gap-1 p-2">
                            {activeExercises.map((id, idx) => (
                                <div key={id} className={`h-1.5 rounded-full transition-all duration-300 ${idx === currentExIndex ? 'w-8 bg-orange-500' : 'w-4 bg-slate-700'}`} />
                            ))}
                        </div>
                        <main className="flex-1 p-6 flex flex-col justify-center">
                            <div className={`self-center mb-6 px-4 py-1.5 rounded-full border text-xs font-black tracking-widest uppercase ${pathColor}`}>{userExData.path} PATH</div>
                            <div className="text-center space-y-4 mb-6">
                                <h2 className="text-4xl md:text-6xl font-black leading-none text-white tracking-tight">{exData.base}</h2>
                            </div>
                            <div className="grid grid-cols-2 gap-4 mb-8">
                                <div className="bg-slate-900 p-4 rounded-2xl border border-slate-800 text-center">
                                    <div className="text-slate-500 text-xs uppercase font-bold mb-1">Weight</div>
                                    <div className="text-2xl font-mono font-bold text-white">{userExData.weight} <span className="text-sm text-slate-600">lbs</span></div>
                                </div>
                                <div className="bg-slate-900 p-4 rounded-2xl border border-slate-800 text-center relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1 h-full bg-red-500"></div>
                                    <div className="text-slate-500 text-xs uppercase font-bold mb-1">X-tinct Limit</div>
                                    <div className="text-2xl font-mono font-bold text-red-500">&lt; {userExData.threshold}</div>
                                </div>
                            </div>
                            <form onSubmit={submitReps} className="mt-auto">
                                <div className="flex items-center justify-between gap-2 mb-4">
                                    <div className="flex gap-1">
                                        <button type="button" onClick={() => adjustReps(-5)} className="bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all">-5</button>
                                        <button type="button" onClick={() => adjustReps(-1)} className="bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all">-1</button>
                                    </div>
                                    <div className="flex-1 relative">
                                        <input type="number" inputMode="numeric" autoFocus placeholder="0" className="w-full bg-transparent border-b-2 border-slate-700 focus:border-orange-500 text-center text-5xl font-black text-white py-2 outline-none placeholder-slate-800 transition-colors" value={currentRepsInput} onChange={(e) => setCurrentRepsInput(e.target.value)} />
                                        <div className="text-center text-slate-500 text-xs font-bold mt-1">REPS</div>
                                    </div>
                                    <div className="flex gap-1">
                                        <button type="button" onClick={() => adjustReps(1)} className="bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all">+1</button>
                                        <button type="button" onClick={() => adjustReps(5)} className="bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white p-3 rounded-lg active:scale-95 font-bold transition-all">+5</button>
                                    </div>
                                </div>
                                <button type="submit" disabled={!currentRepsInput} className="w-full bg-orange-600 disabled:bg-slate-800 disabled:text-slate-600 text-white font-bold text-lg py-5 rounded-2xl shadow-lg active:scale-95 transition-all flex justify-center items-center gap-2">
                                    COMPLETE SET <CheckCircle2 className="w-6 h-6" />
                                </button>
                                <button type="button" onClick={requestGiveUp} className={`w-full mt-4 border text-sm font-bold py-3 rounded-2xl active:scale-95 transition-all flex items-center justify-center gap-2 ${giveUpConfirm ? 'bg-red-500/10 border-red-500 text-red-500' : 'bg-slate-900 border-slate-800 text-slate-500'}`}>
                                    {giveUpConfirm ? 'CONFIRM END?' : 'END CHALLENGE'} {giveUpConfirm && <LogOut className="w-4 h-4" />}
                                </button>
                            </form>
                        </main>
                    </div>
                );
            }

            if (phase === 'REST') {
                const isLastMan = activeExercises.length === 1;
                const nextId = activeExercises[0];
                const nextEx = WORKOUT_DATA[selectedDay].find(e => e.id === nextId);
                const nextVar = nextEx.variations[ignitorData[nextId].path];

                return (
                    <div className={`min-h-screen ${isLastMan ? 'bg-red-950' : 'bg-slate-950'} text-white flex flex-col items-center justify-center p-6 relative overflow-hidden transition-colors duration-500`}>
                        {isLastMan && <div className="absolute inset-0 animate-pulse bg-red-900/20 pointer-events-none"></div>}
                        <div className="z-10 text-center w-full max-w-md">
                            <div className="mb-4 font-black tracking-widest text-slate-400 uppercase">{isLastMan ? 'LAST MAN STANDING' : 'REST'}</div>
                            <div className="relative w-48 h-48 mx-auto flex items-center justify-center border-8 border-slate-800 rounded-full mb-12 bg-slate-900/50 backdrop-blur">
                                <svg className="absolute top-0 left-0 w-full h-full -rotate-90">
                                    <circle cx="90" cy="90" r="86" fill="none" stroke={isLastMan ? '#ef4444' : '#f97316'} strokeWidth="6" strokeDasharray="540" strokeDashoffset={540 - (540 * timeLeft) / (isLastMan ? 10 : 60)} className="transition-all duration-1000 ease-linear" />
                                </svg>
                                <div className="text-6xl font-mono font-bold">{timeLeft}</div>
                            </div>
                            <div className="bg-slate-900/80 p-6 rounded-2xl border border-slate-700/50 backdrop-blur-sm relative">
                                <div className="text-xs uppercase text-slate-500 font-bold mb-2">Coming Up Next</div>
                                <h3 className="text-2xl md:text-3xl font-black text-white mb-2 leading-tight">{nextEx.base}</h3>
                                <div className="inline-block bg-slate-800 px-3 py-1 rounded-lg border border-slate-700">
                                    <span className="text-orange-400 font-bold text-sm">{nextVar}</span>
                                </div>
                                <p className="text-slate-500 text-xs mt-3">Round {round + 1}</p>
                            </div>
                            <div className="flex flex-col gap-3 mt-8">
                                <button onClick={() => setTimeLeft(0)} className="text-white bg-slate-800 hover:bg-slate-700 font-bold py-3 px-6 rounded-xl transition-colors">Skip Rest</button>
                                <button type="button" onClick={requestGiveUp} className={`text-xs font-bold py-2 px-6 rounded-xl transition-all ${giveUpConfirm ? 'text-red-500 bg-red-500/10' : 'text-slate-500 hover:text-slate-300'}`}>
                                    {giveUpConfirm ? 'CONFIRM END?' : 'End Challenge'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (phase === 'RESULTS') {
                const rank = getRank(score);
                return (
                    <div className="min-h-screen bg-slate-950 text-white p-6 flex flex-col items-center justify-center">
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-black italic text-slate-700 mb-2">GAME OVER</h1>
                            <p className="text-slate-400">All exercises X-tinct</p>
                        </div>
                        <div className={`relative w-64 h-64 flex flex-col items-center justify-center border-4 ${rank.border} rounded-full bg-slate-900 mb-6 shadow-2xl shadow-${rank.color}/20`}>
                            <div className="text-sm text-slate-500 font-bold uppercase tracking-widest mb-1">Total Score</div>
                            <div className="text-7xl font-black mb-2">{score}</div>
                            <div className={`text-2xl font-black tracking-tighter ${rank.color} bg-white/5 px-4 py-1 rounded-lg`}>{rank.title}</div>
                        </div>
                        <div className="w-full max-w-sm grid grid-cols-2 gap-4 mb-8">
                            <div className="bg-slate-900 p-4 rounded-xl border border-slate-800 text-center">
                                <div className="text-xs text-slate-500 uppercase">Rounds</div>
                                <div className="text-2xl font-bold">{round}</div>
                            </div>
                            <div className="bg-slate-900 p-4 rounded-xl border border-slate-800 text-center">
                                <div className="text-xs text-slate-500 uppercase">Eliminated</div>
                                <div className="text-2xl font-bold text-red-500">{eliminatedList.length}<span className="text-sm text-slate-600">/4</span></div>
                            </div>
                        </div>
                        <div className="w-full max-w-sm bg-slate-900 rounded-xl p-4 border border-slate-800 mb-8">
                            <h3 className="text-xs font-bold text-slate-500 uppercase mb-3">Casualty Report</h3>
                            <div className="space-y-2">
                                {eliminatedList.map((item, idx) => (
                                    <div key={idx} className="flex justify-between items-center text-sm">
                                        <span className="text-slate-300">{item.name}</span>
                                        <span className="text-red-500 font-mono text-xs">Round {item.round}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                        <button onClick={resetApp} className="bg-slate-800 hover:bg-slate-700 text-white font-bold py-4 px-8 rounded-xl flex items-center gap-2 transition-colors">
                            <RefreshCw className="w-5 h-5" /> Play Again
                        </button>
                    </div>
                );
            }

            return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <>
                <audio id="timer-audio" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>
                <JackedClassicApp />
            </>
        );
    </script>
</body>
</html>
